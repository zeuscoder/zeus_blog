---
title: WEB：一次偶然的依赖库安全问题
date: 2024-01-29 11:08:27
tags:
---
背景：在大型企业部署应用后，多数会对系统进行安全扫描，至少处理高等级或中等级问题。

<!-- more -->

问题：扫描结果中有多个依赖的版本过低，存在安全问题，**需要通过升级这些依赖的版本**，从而解决问题。

解决思路：

* 1：扫描的依赖是来源于 `package-lock.json` 的，而不是 `package.json`，无法直接通过修改依赖版本。
* 2：仔细发现扫描出来有问题的依赖都属于构建工具，都是跟 `webpack` 相关，而通过验证后 `webpack5` 的相关版本都得到了升级，且满足安全要求。
* 3：项目本身是基于 `vue-cli` 创建的，webpack 也是包含在 `@vue/cli` 工具依赖库里面，且只有最新版本 `@vue/cli` **5.0.8** 版本才引用的是 `webpack5`。
* 4：本地升级 `@vue/cli` 工具版本，创建新项目，并移植 `package-lock.json` 的相关依赖。

总结：通过升级 `@vue/cli` 最新版本，从而带动 `webpack` 升级为 `webpack5`，曲折地升级所有有问题的依赖版本。

PS：这是一次比较取巧的方案，要是死磕 `package-lock.json` 也可能得不到什么比较好且方便的方案。
